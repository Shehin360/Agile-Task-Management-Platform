<div class="auth-page">
  <!-- Floating orbs -->
  <div class="auth-orb auth-orb-1"></div>
  <div class="auth-orb auth-orb-2"></div>
  <div class="auth-orb auth-orb-3"></div>

  <div class="auth-container" @fadeIn>
    <!-- Brand -->
    <div class="auth-brand">
      <h1 class="auth-logo">Sprintly</h1>
      <p class="auth-tagline">Agile Task Management</p>
    </div>

    <!-- Card -->
    <div class="auth-card register-card" [@shake]="shakeState()">
      <h2 class="auth-heading">Create Account</h2>
      <p class="auth-subheading">Join your team's workspace</p>

      <!-- Error -->
      @if (error()) {
      <div class="auth-error">
        <span class="auth-error-icon">âš ï¸</span>
        <span>{{ error() }}</span>
      </div>
      }

      <!-- Display Name -->
      <div class="auth-input-group">
        <label class="auth-input-label" for="displayName">Display Name</label>
        <div class="auth-input-wrapper" [class.input-invalid]="displayNameError()">
          <span class="auth-input-icon">ğŸ˜Š</span>
          <input
            class="auth-input"
            id="displayName"
            type="text"
            placeholder="How should we call you?"
            [value]="displayName()"
            (input)="onDisplayNameInput($any($event.target).value)"
            (blur)="onDisplayNameBlur()"
            (keyup.enter)="onSubmit()"
            autocomplete="name"
          />
          @if (displayNameError()) {
          <span class="auth-input-status">âœ•</span>
          } @else if (displayNameTouched() && !displayNameError()) {
          <span class="auth-input-status valid">âœ“</span>
          }
        </div>
        @if (displayNameError()) {
        <span class="auth-field-error">{{ displayNameError() }}</span>
        }
      </div>

      <!-- Username -->
      <div class="auth-input-group">
        <label class="auth-input-label" for="username">Username</label>
        <div class="auth-input-wrapper" [class.input-invalid]="usernameError()">
          <span class="auth-input-icon">ğŸ‘¤</span>
          <input
            class="auth-input"
            id="username"
            type="text"
            placeholder="Choose a username"
            [value]="username()"
            (input)="onUsernameInput($any($event.target).value)"
            (blur)="onUsernameBlur()"
            (keyup.enter)="onSubmit()"
            autocomplete="username"
          />
          @if (usernameError()) {
          <span class="auth-input-status">âœ•</span>
          } @else if (usernameTouched() && !usernameError()) {
          <span class="auth-input-status valid">âœ“</span>
          }
        </div>
        @if (usernameError()) {
        <span class="auth-field-error">{{ usernameError() }}</span>
        }
      </div>

      <!-- Password -->
      <div class="auth-input-group">
        <label class="auth-input-label" for="password">Password</label>
        <div class="auth-input-wrapper" [class.input-invalid]="passwordError()">
          <span class="auth-input-icon">ğŸ”’</span>
          <input
            class="auth-input"
            id="password"
            [type]="showPassword() ? 'text' : 'password'"
            placeholder="Create a password"
            [value]="password()"
            (input)="onPasswordInput($any($event.target).value)"
            (blur)="onPasswordBlur()"
            (keyup.enter)="onSubmit()"
            autocomplete="new-password"
          />
          <button class="auth-password-toggle" type="button" (click)="togglePassword()">
            {{ showPassword() ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>
        @if (passwordError()) {
        <span class="auth-field-error">{{ passwordError() }}</span>
        }
      </div>

      <!-- Confirm Password -->
      <div class="auth-input-group">
        <label class="auth-input-label" for="confirmPassword">Confirm Password</label>
        <div class="auth-input-wrapper" [class.input-invalid]="confirmPasswordError()">
          <span class="auth-input-icon">ğŸ”</span>
          <input
            class="auth-input"
            id="confirmPassword"
            [type]="showConfirmPassword() ? 'text' : 'password'"
            placeholder="Re-enter your password"
            [value]="confirmPassword()"
            (input)="onConfirmPasswordInput($any($event.target).value)"
            (blur)="onConfirmPasswordBlur()"
            (keyup.enter)="onSubmit()"
            autocomplete="new-password"
          />
          <button class="auth-password-toggle" type="button" (click)="toggleConfirmPassword()">
            {{ showConfirmPassword() ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>
        @if (confirmPasswordError()) {
        <span class="auth-field-error">{{ confirmPasswordError() }}</span>
        }
      </div>

      <!-- Submit -->
      <button class="auth-btn register-btn" (click)="onSubmit()" [disabled]="isLoading()">
        @if (isLoading()) {
        <span class="auth-spinner"></span>
        <span>Creating account...</span>
        } @else {
        <span>Create Account</span>
        <span class="auth-btn-arrow">â†’</span>
        }
      </button>

      <!-- Link to login -->
      <div class="auth-switch">
        <span class="auth-switch-text">Already have an account?</span>
        <a class="auth-switch-link" routerLink="/login">Sign In</a>
      </div>
    </div>
  </div>
</div>
